# Test info

- Name: Contratos de compañia
- Location: /home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeCompanias.spec.ts:4:5

# Error details

```
TimeoutError: page.click: Timeout 30000ms exceeded.
Call log:
  - waiting for locator('a[href="/CompanyContracts"]')
    - waiting for" https://console.ationet.com/" navigation to finish...
    - navigated to "https://sts.ationet.com/connect/authorize?client_id=Ationet&redirect_uri=https%3a%2f%2fconsole.ationet.com%2f&response_mode=form_post&response_type=code+id_token&scope=openid+profile+email+offline_ac…"
    - waiting for" https://console.ationet.com/" navigation to finish...
    - navigated to "https://console.ationet.com/"

    at body (/home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeCompanias.spec.ts:84:24)
    at body (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:113:48)
    at call (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:13:56)
    at tryCatch (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator._invoke (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator.next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at asyncGeneratorStep (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at _next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at call (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:13:23)
    at tryCatch (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator._invoke (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator.next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at asyncGeneratorStep (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at _next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at AllurePlaywrightTestRuntime.apply (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at AllurePlaywrightTestRuntime.step (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:14:4)
    at callRuntimeMethod (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:21:27)
    at Object.step (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:113:10)
    at Object.step (/home/maxii1221/testAuto/node_modules/allure-playwright/src/legacy.ts:147:48)
    at /home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeCompanias.spec.ts:83:22
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { allure } from 'allure-playwright';
   3 |
   4 | test('Contratos de compañia', async ({ page }, testInfo) => {
   5 |     //varibles:
   6 |     const urlBETA = testInfo.project.use?.baseURL; 
   7 |
   8 |     // Allure metadata
   9 |
   10 |     //esto aparece en suite para ordenar mejor
   11 |     allure.suite('NWAdmin');
   12 |     allure.subSuite('Flota');
   13 |
   14 |     //usuario que ejecuto la automatizacion
   15 |     allure.owner('Maximiliano');
   16 |     allure.tag('regression');
   17 |
   18 |     //label para funcionalidades allure
   19 |     allure.label('epic', 'NWAdmin - Flota');
   20 |     allure.label('feature', 'Contratos de Compañia');
   21 |     allure.story('Navegar, Crear y Editar');
   22 |
   23 |     //dentro del test cuando lo abrimos aparece la descripcion
   24 |     allure.description(`
   25 |     Objetivo: Este test automatiza el proceso de navegacion, creacion y poder editar Contratos de Compañia.
   26 |     `);
   27 |     allure.severity('critical'); // opciones: blocker | critical | normal | minor | trivial  
   28 |
   29 |
   30 |     // Generar un valor aleatorio para cada campo
   31 |     const randomId = Math.floor(Math.random() * 100000);
   32 |     const companyContractCode = `${randomId}`;
   33 |     const fechaISO = new Date().toISOString().split('T')[0].replace(/-/g, '/');
   34 |     const companyContractDescription = `Contract${randomId}`
   35 |
   36 |     await allure.step('Navegar y acceder a Contrato de Compañia',async () => {
   37 |         await allure.step('Acceder a la url de login', async () => {
   38 |             await page.goto(urlBETA!);
   39 |         });
   40 |
   41 |         await allure.step('Hacer click en input nombre de usuario', async () => {
   42 |             await page.locator('#UserName').click();
   43 |         });
   44 |
   45 |         await allure.step('Escribir en input nombre de usuario', async () => {
   46 |             await page.locator('#UserName').fill('QAutomation@gmail.com');
   47 |         });
   48 |
   49 |         await allure.step('Hacer click en input Contraseña de usuario', async () => {
   50 |             await page.locator('#Password').click();
   51 |         });
   52 |
   53 |         await allure.step('Escribir en input Contraseña de usuario', async () => {
   54 |             await page.locator('#Password').fill('O06DF3LJ');
   55 |         });
   56 |
   57 |         await allure.step('Hacer Click en ingresar', async () => {
   58 |             await page.locator('#submit').click();
   59 |         });
   60 |         
   61 |         await allure.step('espera de carga', async () => {
   62 |             await page.waitForTimeout(2000); // espera 2 segundos
   63 |         });
   64 |
   65 |         // await allure.step('hacer click para cambiar rol', async () => {
   66 |         //     const rolLink = page.getByRole('link', { name: /QAutomation Test \(/ }); // regex para tolerar variantes
   67 |         //     await rolLink.waitFor({ state: 'visible', timeout: 60000 });
   68 |         //     await expect(rolLink).toBeEnabled({ timeout: 60000 });
   69 |         //     await rolLink.click(); 
   70 |         // });
   71 |     
   72 |         // await allure.step('hacer click para desplegar lista de roles', async () => {
   73 |         //     const showAllBtn = page.getByTitle('Show All Items');
   74 |         //     await showAllBtn.waitFor({ state: 'visible', timeout: 60000 });
   75 |         //     await expect(showAllBtn).toBeEnabled({ timeout: 60000 });
   76 |         //     await showAllBtn.click();
   77 |         // });
   78 |
   79 |         // await allure.step('hacer click en rol NWAdmin - LAB QA', async () => {
   80 |         //     await page.getByText('NW Admin - LAB Network').click();
   81 |         // });
   82 |
   83 |         await allure.step('acceder a modulo contratos de compañia', async () => {
>  84 |             await page.click('a[href="/CompanyContracts"]');
      |                        ^ TimeoutError: page.click: Timeout 30000ms exceeded.
   85 |         });
   86 |
   87 |         await allure.step('veriricar que estamos en la url de contrato de compañia', async () => {
   88 |             await expect(page).toHaveURL('https://console.ationet.com/CompanyContracts');
   89 |         });    
   90 |     });   
   91 |
   92 |     await allure.step('Crear nuevo contrato de compañia' , async () => {
   93 |
   94 |         await allure.step('Click en boton Nuevo' , async () => {
   95 |             await page.getByRole('button', { name: 'Nuevo' }).first().click();
   96 |         });
   97 |
   98 |         await allure.step('Verificar que estamos en la url de crear contrato de compañia' , async () => {
   99 |             await expect(page).toHaveURL('https://console.ationet.com/CompanyContracts/Create');
  100 |         });
  101 |
  102 |         await allure.step('Click en input compañia' , async () => {
  103 |             await page.locator('#token-input-CompanyContract_CompanyId').click();
  104 |         });
  105 |
  106 |         await allure.step('Escribir en input compañia' , async () => {
  107 |             await page.locator('#token-input-CompanyContract_CompanyId').type('All', { delay: 100 });
  108 |         });
  109 |
  110 |         await allure.step('Selecionar Opcion en input compañia' , async () => {
  111 |             await page.locator('.token-input-dropdown-ationet li', { hasText: 'All In One Laboratorio' }).first().click();
  112 |         });
  113 |
  114 |         await allure.step('Click en input Codigo' , async () => {
  115 |             await page.locator('#CompanyContract_Code').click();
  116 |         });
  117 |
  118 |         await allure.step('Escribir en input Codigo' , async () => {
  119 |             await page.locator('#CompanyContract_Code').fill(companyContractCode);
  120 |         });
  121 |
  122 |         await allure.step('Click en input Descripcion' , async () => {
  123 |             await page.locator('#CompanyContract_Description').click();
  124 |         });
  125 |
  126 |         await allure.step('Escribir en input Descripcion' , async () => {
  127 |             await page.locator('#CompanyContract_Description').fill(companyContractDescription);
  128 |         });
  129 |
  130 |         await allure.step('Click en input fecha de inicio' , async () => {
  131 |             await page.locator('#CompanyContract_StartDate').click();
  132 |         });
  133 |
  134 |         await allure.step('Escribir en input fecha de inicio' , async () => {
  135 |             await page.locator('#CompanyContract_StartDate').fill(fechaISO);
  136 |         });
  137 |
  138 |         await allure.step('Click en input duracion' , async () => {
  139 |             await page.locator('#CompanyContract_Duration').click();
  140 |         });
  141 |
  142 |         await allure.step('Escribir en input duracion' , async () => {
  143 |             await page.locator('#CompanyContract_Duration').fill('10');
  144 |         });
  145 |
  146 |         await allure.step('Desplegar y seleccionar en input Modo de cuenta corriente' , async () => {
  147 |             await page.locator('#CompanyContract_CurrentAccountMode').selectOption({ label: 'Productos' });
  148 |         });
  149 |
  150 |         await allure.step('Desplegar y seleccionar en input modo' , async () => {
  151 |             await page.locator('#CompanyContract_Mode').selectOption({ label: 'Credito' });
  152 |         });
  153 |
  154 |         await allure.step('Desplegar y seleccionar en input Modo de saldo' , async () => {
  155 |             await page.locator('#CompanyContract_BalanceMode').selectOption({ label: 'Dispersar' });
  156 |         });
  157 |
  158 |         await allure.step('Click en input combustible' , async () => {
  159 |             await page.locator('#token-input-Fuel').click();
  160 |         });
  161 |
  162 |         await allure.step('Escribir en input combustible' , async () => {
  163 |             await page.locator('#token-input-Fuel').type('Compre', { delay: 100 });
  164 |         });
  165 |
  166 |         await allure.step('Seleccionar en input combustible' , async () => {
  167 |             await page.getByText('Compressed Natural Gas', { exact: false }).click();
  168 |         });
  169 |
  170 |         await allure.step('Click en boton guardar' , async () => {
  171 |             await page.locator('#save').click();
  172 |         });
  173 |
  174 |     });
  175 |
  176 |     await allure.step('filtrar nuevo contrato de compañia' , async () => {
  177 |
  178 |             await allure.step('Aseguramos que el filtro esté presente' , async () => {
  179 |                 await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 60000 });
  180 |             });
  181 |
  182 |             await allure.step('Click en filtro no en todo el panel' , async () => {
  183 |                         await allure.step('Verificamos que el panel de filtro exista',async () => {
  184 |             await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 20000 });
```