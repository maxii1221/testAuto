# Test info

- Name: Contratos de Comercio
- Location: /home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeComercio.spec.ts:4:5

# Error details

```
TimeoutError: page.click: Timeout 30000ms exceeded.
Call log:
  - waiting for locator('a[href="/MerchantsContracts"]')
    - locator resolved to <a href="/MerchantsContracts">Contratos de Comercios</a>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is visible, enabled and stable
      - scrolling into view if needed
      - done scrolling
      - <div class="blockUI blockOverlay"></div> intercepts pointer events
    - retrying click action
    - waiting 20ms
    - waiting for element to be visible, enabled and stable
    - element is visible, enabled and stable
    - scrolling into view if needed
    - done scrolling
    - performing click action
    - click action done
    - waiting for scheduled navigations to finish

    at body (/home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeComercio.spec.ts:218:24)
    at body (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:113:48)
    at call (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:13:56)
    at tryCatch (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator._invoke (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator.next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at asyncGeneratorStep (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at _next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at call (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:13:23)
    at tryCatch (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator._invoke (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator.next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at asyncGeneratorStep (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at _next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at AllurePlaywrightTestRuntime.apply (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at AllurePlaywrightTestRuntime.step (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:14:4)
    at callRuntimeMethod (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:21:27)
    at Object.step (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:113:10)
    at Object.step (/home/maxii1221/testAuto/node_modules/allure-playwright/src/legacy.ts:147:48)
    at body (/home/maxii1221/testAuto/tests/LAB Network/NWAdmin/flota/contratosDeComercio.spec.ts:217:22)
    at body (/home/maxii1221/testAuto/node_modules/allure-js-commons/src/facade.ts:113:48)
    at call (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:13:56)
    at tryCatch (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator._invoke (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at Generator.next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at asyncGeneratorStep (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at _next (/home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1)
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
    at /home/maxii1221/testAuto/node_modules/allure-playwright/src/runtime.ts:2:1
```

# Test source

```ts
  118 |
  119 |         await allure.step('Desplegar lista y seleccionar idioma', async () => {
  120 |             await page.locator('#IdLanguage').selectOption({ label: 'Spanish - Argentina' });
  121 |         });
  122 |         
  123 |         await allure.step('Hacer click en input nombre corto de sitio', async () => {
  124 |             await page.locator('#Site_ShortName').click();
  125 |         });
  126 |
  127 |         await allure.step('Escribir en input nombre corto de sitio', async () => {
  128 |             await page.locator('#Site_ShortName').fill(siteShortName);
  129 |         });
  130 |
  131 |         await allure.step('Hacer click en input calle de sitio', async () => {
  132 |             await page.locator('#Site_Street1').click();
  133 |         });
  134 |
  135 |         await allure.step('Escribir en input calle de sitio', async () => {
  136 |             await page.locator('#Site_Street1').fill('Chacabuco 661');
  137 |         });       
  138 |         
  139 |         await allure.step('Desplegar lista y seleccionar zona horaria de sitio', async () => {
  140 |             await page.locator('#Site_TimeZone').selectOption({ label: '(UTC-03:00) City of Buenos Aires' });
  141 |         });
  142 |
  143 |         await allure.step('Hacer click en input ciudad de sitio', async () => {
  144 |             await page.locator('#Site_City').click();
  145 |         });
  146 |
  147 |         await allure.step('Escribir en input ciudad de sitio', async () => {
  148 |             await page.locator('#Site_City').fill('San Isidro');
  149 |         });
  150 |      
  151 |         await allure.step('Desplegar lista y seleccionar pais de sitio', async () => {
  152 |             await page.locator('#IdCountry').selectOption({ label: 'Argentina' });
  153 |         });
  154 |
  155 |         await allure.step('Desplegar lista y seleccionar ciudad de sitio', async () => {
  156 |             await page.locator('#IdState').selectOption({ label: 'Buenos Aires' });
  157 |         });
  158 |
  159 |         await allure.step('Desplegar lista y seleccionar moneda de sitio', async () => {
  160 |             await page.getByLabel('Moneda: *').selectOption({ label: 'ARS' });
  161 |         });
  162 |
  163 |         await allure.step('Hacer click en boton guardar', async () => {
  164 |             await page.locator('#save').click();
  165 |         });
  166 |
  167 |         await allure.step('Hacer click en boton SI', async () => {
  168 |             await page.getByRole('button', { name: 'Si' }).click();
  169 |         });
  170 |     });
  171 |     
  172 |     await allure.step('filtrar Nuevo Sitio', async () => {
  173 |
  174 |         await allure.step('Aseguramos que el panel esté presente', async () => {
  175 |             await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 60000 });      
  176 |         })
  177 |
  178 |         await allure.step('Click en el título, no en todo el panel', async () => {
  179 |                     await allure.step('Verificamos que el panel de filtro exista',async () => {
  180 |             await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 20000 });
  181 |         });
  182 |
  183 |         await allure.step('Click en el título, no en todo el panel',async () => {
  184 |             const panelTitle = page.locator('#filterPanel .collapsibleContainerTitle');
  185 |             await panelTitle.waitFor({ state: 'visible', timeout: 20000 });
  186 |             await panelTitle.click();
  187 |         });
  188 |
  189 |         await allure.step('Esperar que se despliegue el contenido',async () => {
  190 |             await page.locator('#filterPanel .collapsibleContainerContent').waitFor({ state: 'visible', timeout: 20000 });
  191 |         });({ timeout: 60000 });        
  192 |         })
  193 |
  194 |         await allure.step('Esperar que se despliegue el contenido', async () => {
  195 |             await page.locator('#filterPanel .collapsibleContainerContent').waitFor({ state: 'visible', timeout: 60000 });         
  196 |         })
  197 |
  198 |         await allure.step('Hacer click en codigo de sitio', async () => {
  199 |             await page.locator('label[for="code"]').click();          
  200 |         })
  201 |
  202 |         await allure.step('Escribir codigo de sitio', async () => { 
  203 |             await page.locator('label[for="code"]').fill(siteCode);          
  204 |         })
  205 |
  206 |         await allure.step('Hacer click en buscar', async () => {
  207 |             await page.locator('#search').click();          
  208 |         })
  209 |
  210 |         await allure.step('Verifiquemos que existe nuestro Sitio', async () => {
  211 |             await expect(page.locator('.dtls tr td a').first()).toHaveText(siteCode);         
  212 |         })
  213 |     });
  214 |     
  215 |     await allure.step('Navegar y acceder a Contrato de comercio',async () => {
  216 |
  217 |         await allure.step('acceder a modulo contratos de comercio', async () => {
> 218 |             await page.click('a[href="/MerchantsContracts"]');
      |                        ^ TimeoutError: page.click: Timeout 30000ms exceeded.
  219 |         });
  220 |
  221 |         await allure.step('veriricar que estamos en la url de contrato de comercio', async () => {
  222 |             await expect(page).toHaveURL('https://console.ationet.com/MerchantsContracts');
  223 |         });    
  224 |     });   
  225 |
  226 |     await allure.step('Crear nuevo contrato de comercio', async () => {
  227 |
  228 |         await allure.step('Click en boton Nuevo' , async () => {
  229 |             await page.getByRole('button', { name: 'Nuevo' }).first().click();
  230 |         });
  231 |
  232 |         await allure.step('Verificamos que estemos en la url nuevo contrato de comercio' , async () => {
  233 |             await expect(page).toHaveURL('https://console.ationet.com/MerchantsContracts/Create');
  234 |         });
  235 |
  236 |         await allure.step('Click en input Comercio' , async () => {
  237 |             await page.locator('#token-input-MerchantsContract_MerchantId').click();
  238 |         });
  239 |
  240 |         await allure.step('Escribir en input Comercio' , async () => {
  241 |             await page.locator('#token-input-MerchantsContract_MerchantId').type('All In O', { delay: 100 });
  242 |         });
  243 |
  244 |         await allure.step('Seleccionar opcion en input Comercio' , async () => {
  245 |             await page.getByText('All In One - Laboratorio', { exact: false }).click();
  246 |         });
  247 |
  248 |         await allure.step('Click en input codigo' , async () => {
  249 |             await page.locator('#MerchantsContract_Code').click();
  250 |         });
  251 |
  252 |         await allure.step('Escribir en input codigo' , async () => {
  253 |             await page.locator('#MerchantsContract_Code').fill(codeContratoDeComercio);
  254 |         });
  255 |
  256 |         await allure.step('Click en input Descripcion' , async () => {
  257 |             await page.locator('#MerchantsContract_Description').click();
  258 |         });
  259 |
  260 |         await allure.step('Escribir en input Descripcion' , async () => {
  261 |             await page.locator('#MerchantsContract_Description').fill(descContratoDeComercio);
  262 |         });
  263 |
  264 |         await allure.step('Click en input fecha de inicio' , async () => {
  265 |             await page.locator('#MerchantsContract_StartDate').click();
  266 |         });
  267 |
  268 |         await allure.step('Escribir en input fecha de inicio' , async () => {
  269 |             await page.locator('#MerchantsContract_StartDate').fill(fechaISO);
  270 |         });
  271 |
  272 |         await allure.step('Click en input Duracion' , async () => {
  273 |             await page.locator('#MerchantsContract_Duration').click();
  274 |         });
  275 |
  276 |         await allure.step('Escribir en input Duracion' , async () => {
  277 |             await page.locator('#MerchantsContract_Duration').fill('1');
  278 |         });
  279 |
  280 |
  281 |         await allure.step('Desplegar lista y seleccionar Modo de cuenta corriente' , async () => {
  282 |             await page.locator('#MerchantsContract_CurrentAccountMode').selectOption({ label: 'Importe' });
  283 |         });
  284 |
  285 |         await allure.step('Desplegar lista y seleccionar Moneda' , async () => {
  286 |             await page.locator('#MerchantsContract_CurrencyId').selectOption({ label: 'ARS' });
  287 |         });
  288 |
  289 |         await allure.step('Click en input sitio' , async () => {
  290 |             await page.locator('#token-input-Site').click();
  291 |         });
  292 |
  293 |         await allure.step('Escribir en input sitio (sin último dígito)' , async () => {
  294 |         const partialSite = siteShortName.slice(0, -1); // recorta el último carácter
  295 |         await page.locator('#token-input-Site').type(partialSite, { delay: 100 });
  296 |         });
  297 |
  298 |         await allure.step('Seleccionar sitio' , async () => {
  299 |             await page.getByText(siteShortName, { exact: true }).click();
  300 |         });
  301 |
  302 |         await allure.step('Click en boton Guardar' , async () => {
  303 |             await page.locator('#save').click();
  304 |         });
  305 |
  306 |     });
  307 |     
  308 |     await allure.step('Filtramos nuevo contrato de comercio', async () => {
  309 |
  310 |         await allure.step('Aseguramos que el filtro esté presente' , async () => {
  311 |             await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 60000 });
  312 |         });
  313 |
  314 |         await allure.step('Click en el filtro, no en todo el panel' , async () => {
  315 |                     await allure.step('Verificamos que el panel de filtro exista',async () => {
  316 |             await page.locator('#filterPanel').waitFor({ state: 'visible', timeout: 20000 });
  317 |         });
  318 |
```